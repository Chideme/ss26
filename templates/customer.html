<link rel="stylesheet" href="/static/vendor/bootstrap/css/bootstrap.min.css"/>
<link href="/static/dashboard.css" rel="stylesheet">
<link href="/static/style.css" rel="stylesheet">

<a href="{{ url_for('customers') }}"><span style="color: royalblue;">Back</span></a>
<h4 class="h4 text-center p3">{{ customer }} Statement</h4>
<div class="text-center">
<h5>Balance: {{ net }}</h5>
<h6>Period: {{ start }}  TO   {{ end }}</h6>
    <form style="display: inline-block;" action="{{ url_for('customer',customer_id= customer.id) }}"  method="post">
    <div class="btn-toolbar mb-2 mb-md-0">
    <div class="btn-group mr-2">
        <input type = "date"  name="start_date" autocomplete="off"autofocus class="form-control" required>
        <input type = "date"  name="end_date" autocomplete="off"autofocus class="form-control" required>
        <button type="submit" class="btn btn-sm btn-outline-secondary">Enter</button>
    </div>
    </div>
    </form>

</div>
<div class="p-5 text-center">
    <table class="table table-sm table-striped">
        <thead>
            <th>Date</th>
            <th class="text-center"colspan="7">Invoices</th>
            <th>Payments</th>
            <th>Balance</th>
        </thead>
        <tbody>
            <tr>
                <td></td>
                <td>Invoice Number</td>
                <td>Driver</td>
                <td>Vehicle Number</td>
                <td>Product</td>
                <td>Qty</td>
                <td>Selling Price</td>
                <td>Amount</td>
                <td></td>
                <td></td>
            </tr>
            {% for date in dates %}
            {% if records[date]["pmnt"]  and records[date]["inv"] %}
            <tr>
                <td>{{ date }}</td>
                <td></td>
                <td></td>
                <td></td> 
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td>{{ records[date]["pmnt"] }}</td>
                <td>{{ records[date]["bal"] }}</td> 
            </tr>
            {% for i in inv_ids[date] %}
            <tr>
                <td>{{ date }}</td>
                <td>{{ records[date]["inv"][i][0] }}</td>
                <td>{{ records[date]["inv"][i][1] }}</td>
                <td>{{ records[date]["inv"][i][2] }}</td> 
                <td>{{ records[date]["inv"][i][3] }}</td>
                <td>{{ records[date]["inv"][i][4] }}</td>
                <td>{{ records[date]["inv"][i][5] }}</td>
                <td>{{ records[date]["inv"][i][6] }}</td>
                <td></td>
                <td>{{ records[date]["inv"][i][7] }}</td> 
            </tr>
            {% endfor %}
            
            {% elif records[date]["inv"] %}
            {% for i in inv_ids[date] %}
            <tr>
                <td>{{ date }}</td>
                <td>{{ records[date]["inv"][i][0] }}</td>
                <td>{{ records[date]["inv"][i][1] }}</td>
                <td>{{ records[date]["inv"][i][2] }}</td> 
                <td>{{ records[date]["inv"][i][3] }}</td>
                <td>{{ records[date]["inv"][i][4] }}</td>
                <td>{{ records[date]["inv"][i][5] }}</td>
                <td>{{ records[date]["inv"][i][6] }}</td>
                <td></td>
                <td>{{ records[date]["inv"][i][7] }}</td> 
            </tr>
            {% endfor %}
            {% elif records[date]["pmnt"] %}
            <tr>
                <td>{{ date }}</td>
                <td></td>
                <td></td>
                <td></td> 
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td>{{ records[date]["pmnt"] }}</td>
                <td>{{ records[date]["bal"] }}</td> 
            </tr>
            {% endif %}
            {% endfor %}
        </tbody>
    </table>
</div>